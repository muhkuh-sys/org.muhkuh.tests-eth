<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ADIN1100 10Base-T1L PHY HAL: Includes/hal_adinphy.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="hil_logo_small.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ADIN1100 10Base-T1L PHY HAL<span id="projectnumber">&#160;v1.0.0.0</span>
   </div>
   <div id="projectbrief">hal_adinphy</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('hal__adinphy_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">hal_adinphy.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Prototypes and defines for external PHY ADIN1100 as used on NXEB 90-SPE board.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
</div>
<p><a href="hal__adinphy_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structspe__phy__s.html">spe_phy_s</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Data structure with information about an external SPE PHY.  <a href="structspe__phy__s.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a08055251d826dc6279365edf65d49234"><td class="memItemLeft" align="right" valign="top"><a id="a08055251d826dc6279365edf65d49234" name="a08055251d826dc6279365edf65d49234"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>RC_OKAY</b>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:a08055251d826dc6279365edf65d49234"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function exits normally. <br /></td></tr>
<tr class="separator:a08055251d826dc6279365edf65d49234"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28a4abf365f7eb54946554bc3891aade"><td class="memItemLeft" align="right" valign="top"><a id="a28a4abf365f7eb54946554bc3891aade" name="a28a4abf365f7eb54946554bc3891aade"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>RC_INVALID_PARAM</b>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:a28a4abf365f7eb54946554bc3891aade"><td class="mdescLeft">&#160;</td><td class="mdescRight">A given parameter was invalid. <br /></td></tr>
<tr class="separator:a28a4abf365f7eb54946554bc3891aade"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab12cc671d6f23a4d6eef788bdfc888b3"><td class="memItemLeft" align="right" valign="top"><a id="ab12cc671d6f23a4d6eef788bdfc888b3" name="ab12cc671d6f23a4d6eef788bdfc888b3"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>RC_CONFIG_ERR</b>&#160;&#160;&#160;2</td></tr>
<tr class="memdesc:ab12cc671d6f23a4d6eef788bdfc888b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Some configuration was wrong. <br /></td></tr>
<tr class="separator:ab12cc671d6f23a4d6eef788bdfc888b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ac21e36e074765366ed1783f3b02a359e"><td class="memItemLeft" align="right" valign="top"><a id="ac21e36e074765366ed1783f3b02a359e" name="ac21e36e074765366ed1783f3b02a359e"></a>
typedef struct <a class="el" href="structspe__phy__s.html">spe_phy_s</a>&#160;</td><td class="memItemRight" valign="bottom"><b>SPE_PHY_T</b></td></tr>
<tr class="memdesc:ac21e36e074765366ed1783f3b02a359e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Data structure with information about an external SPE PHY. <br /></td></tr>
<tr class="separator:ac21e36e074765366ed1783f3b02a359e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:afef578c323e82008b5bc0a8596ba669c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__adinphy_8h.html#afef578c323e82008b5bc0a8596ba669c">adinphy_initialize</a> (uint8_t xc_port, uint8_t mdio_addr, void *pt_inst)</td></tr>
<tr class="memdesc:afef578c323e82008b5bc0a8596ba669c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the external PHY on given xC port.  <a href="hal__adinphy_8h.html#afef578c323e82008b5bc0a8596ba669c">More...</a><br /></td></tr>
<tr class="separator:afef578c323e82008b5bc0a8596ba669c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b7b549df9ac48f348da0e83b5ad2da1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__adinphy_8h.html#a4b7b549df9ac48f348da0e83b5ad2da1">adinphy_release</a> (uint8_t xc_port)</td></tr>
<tr class="memdesc:a4b7b549df9ac48f348da0e83b5ad2da1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release external PHY from software power-down.  <a href="hal__adinphy_8h.html#a4b7b549df9ac48f348da0e83b5ad2da1">More...</a><br /></td></tr>
<tr class="separator:a4b7b549df9ac48f348da0e83b5ad2da1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac92ea26fa81003b916b2117b50701ff5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__adinphy_8h.html#ac92ea26fa81003b916b2117b50701ff5">adinphy_setup_irq</a> ()</td></tr>
<tr class="memdesc:ac92ea26fa81003b916b2117b50701ff5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup interrupts for HIF_DIRQ (MMIO17)  <a href="hal__adinphy_8h.html#ac92ea26fa81003b916b2117b50701ff5">More...</a><br /></td></tr>
<tr class="separator:ac92ea26fa81003b916b2117b50701ff5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6840d333012276bc08c1f498b58cf81b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__adinphy_8h.html#a6840d333012276bc08c1f498b58cf81b">adinphy_irq_handler</a> ()</td></tr>
<tr class="memdesc:a6840d333012276bc08c1f498b58cf81b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interrupt service routine for HIF_DIRQ (MMIO17) pin.  <a href="hal__adinphy_8h.html#a6840d333012276bc08c1f498b58cf81b">More...</a><br /></td></tr>
<tr class="separator:a6840d333012276bc08c1f498b58cf81b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a619e879eb2be1b3060da8d04a9eac675"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__adinphy_8h.html#a619e879eb2be1b3060da8d04a9eac675">adinphy_register_link_state_callback</a> (void(*link_state_callback)(void *pvCtx))</td></tr>
<tr class="memdesc:a619e879eb2be1b3060da8d04a9eac675"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reference a callback for link state changes.  <a href="hal__adinphy_8h.html#a619e879eb2be1b3060da8d04a9eac675">More...</a><br /></td></tr>
<tr class="separator:a619e879eb2be1b3060da8d04a9eac675"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73d6293a92953cace7a23db51c1b8b6e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__adinphy_8h.html#a73d6293a92953cace7a23db51c1b8b6e">adinphy_get_linkstate</a> (uint8_t xc_port, unsigned int *link, unsigned int *speed, unsigned int *duplex)</td></tr>
<tr class="memdesc:a73d6293a92953cace7a23db51c1b8b6e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve link state of external ADIN PHY.  <a href="hal__adinphy_8h.html#a73d6293a92953cace7a23db51c1b8b6e">More...</a><br /></td></tr>
<tr class="separator:a73d6293a92953cace7a23db51c1b8b6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9df2ebc33752b18dfe9d6f9fdb53fdc3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__adinphy_8h.html#a9df2ebc33752b18dfe9d6f9fdb53fdc3">adinphy_read_reg</a> (uint8_t phy_addr, uint32_t reg_addr_combined, uint16_t *data)</td></tr>
<tr class="memdesc:a9df2ebc33752b18dfe9d6f9fdb53fdc3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read from a register of the external PHY using MDIO clause 45.  <a href="hal__adinphy_8h.html#a9df2ebc33752b18dfe9d6f9fdb53fdc3">More...</a><br /></td></tr>
<tr class="separator:a9df2ebc33752b18dfe9d6f9fdb53fdc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a008f63e30e9cd594f6cc0d788075fa01"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__adinphy_8h.html#a008f63e30e9cd594f6cc0d788075fa01">adinphy_write_reg</a> (uint8_t phy_addr, uint32_t reg_addr_combined, uint16_t data)</td></tr>
<tr class="memdesc:a008f63e30e9cd594f6cc0d788075fa01"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write to a register of the external PHY via MDIO clause 45.  <a href="hal__adinphy_8h.html#a008f63e30e9cd594f6cc0d788075fa01">More...</a><br /></td></tr>
<tr class="separator:a008f63e30e9cd594f6cc0d788075fa01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace8bd9963ed36148c512522c90992e41"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__adinphy_8h.html#ace8bd9963ed36148c512522c90992e41">adinphy_read_cl45</a> (unsigned int uiPhy, unsigned int uiReg)</td></tr>
<tr class="memdesc:ace8bd9963ed36148c512522c90992e41"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function to read from external PHY with MDIO clause 45.  <a href="hal__adinphy_8h.html#ace8bd9963ed36148c512522c90992e41">More...</a><br /></td></tr>
<tr class="separator:ace8bd9963ed36148c512522c90992e41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0438512e3102a76d9eaba265d4a1a3fe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__adinphy_8h.html#a0438512e3102a76d9eaba265d4a1a3fe">adinphy_write_cl45</a> (unsigned int uiPhy, unsigned int uiReg, unsigned int uiValue)</td></tr>
<tr class="memdesc:a0438512e3102a76d9eaba265d4a1a3fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function to write to external PHY with MDIO clause 45.  <a href="hal__adinphy_8h.html#a0438512e3102a76d9eaba265d4a1a3fe">More...</a><br /></td></tr>
<tr class="separator:a0438512e3102a76d9eaba265d4a1a3fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Prototypes and defines for external PHY ADIN1100 as used on NXEB 90-SPE board. </p>
<dl class="section author"><dt>Author</dt><dd>Marvin Mager - <a href="#" onclick="location.href='mai'+'lto:'+'mma'+'ge'+'r@h'+'il'+'sch'+'er'+'.co'+'m'; return false;">mmage<span style="display: none;">.nosp@m.</span>r@hi<span style="display: none;">.nosp@m.</span>lsche<span style="display: none;">.nosp@m.</span>r.co<span style="display: none;">.nosp@m.</span>m</a> </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Hilscher Gesellschaft fuer Systemautomation mbH. All Rights Reserved. </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a73d6293a92953cace7a23db51c1b8b6e" name="a73d6293a92953cace7a23db51c1b8b6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73d6293a92953cace7a23db51c1b8b6e">&#9670;&nbsp;</a></span>adinphy_get_linkstate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int adinphy_get_linkstate </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>xc_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&#160;</td>
          <td class="paramname"><em>link</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&#160;</td>
          <td class="paramname"><em>speed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&#160;</td>
          <td class="paramname"><em>duplex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve link state of external ADIN PHY. </p>
<p >Retrieves lin status, speed status and duplex information for the external PHY on given xC port. The function is build to fit into the existing PHY HAL, but always returns 10MBit/s speed and full-duplex as this PHY does not support other modes.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">xc_port</td><td>xC channel on which the external PHY is connected to </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">link</td><td>Current link state (1 = link up, 0 = no link) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">speed</td><td>Current link speed (always 10 MBit/s) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">duplex</td><td>Current duplex mode (always 1 for full-duplex)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><b>RC_OKAY</b> : Initialization successful</li>
<li><b>RC_CONFIG_ERR</b> : External PHY on this port is uninitialized</li>
<li><b>RC_INVALID_PARAMETER</b> : Wrong parameter submitted </li>
</ul>
</dd></dl>

</div>
</div>
<a id="afef578c323e82008b5bc0a8596ba669c" name="afef578c323e82008b5bc0a8596ba669c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afef578c323e82008b5bc0a8596ba669c">&#9670;&nbsp;</a></span>adinphy_initialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int adinphy_initialize </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>xc_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>mdio_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pt_inst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the external PHY on given xC port. </p>
<p >To initialize the PHY, a hardware reset (via <code>RST_OUT_N</code>) as well as a software reset are performed. After initialization, the PHY stays in software power-down mode. The LED0 (or LED on rev U1 chips) of the PHY will be set to blink upon TX/RX activity with a period of 50ms. Furthermore, all pending interrupts will be cleared.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">xc_port</td><td>xC channel on which the external PHY is connected to </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mdio_addr</td><td>Hardware address of the external PHY for MDIO access </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pt_inst</td><td>User definable pointer (e.g. to an instance) hat can be accessed in the link state change callback </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><b>RC_OKAY</b> : Initialization successful</li>
<li><b>RC_INVALID_PARAMETER</b> : Wrong parameter submitted </li>
</ul>
</dd></dl>

</div>
</div>
<a id="a6840d333012276bc08c1f498b58cf81b" name="a6840d333012276bc08c1f498b58cf81b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6840d333012276bc08c1f498b58cf81b">&#9670;&nbsp;</a></span>adinphy_irq_handler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void adinphy_irq_handler </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Interrupt service routine for HIF_DIRQ (MMIO17) pin. </p>
<p >This pin is pulled low when the ADIN1100 PHY generates an interrupt. The function does not reset the ARM NVIC IRQ vector, but does clear the interrupt in hif_pio_irq_raw.</p>
<p >When an interrupt is asserted, all initialized PHYs are polled via MDIO. When a reset was detected during runtime, the corresponding PHY is reinitialized. When a link status change was detected, the link state callback (registered with <code><a class="el" href="hal__adinphy_8h.html#a619e879eb2be1b3060da8d04a9eac675" title="Reference a callback for link state changes.">adinphy_register_link_state_callback()</a></code>) is called with a pointer on the corresponding SPE PHY's data structure as parameter. </p>

</div>
</div>
<a id="ace8bd9963ed36148c512522c90992e41" name="ace8bd9963ed36148c512522c90992e41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace8bd9963ed36148c512522c90992e41">&#9670;&nbsp;</a></span>adinphy_read_cl45()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int adinphy_read_cl45 </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>uiPhy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>uiReg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Helper function to read from external PHY with MDIO clause 45. </p>
<p >Read from MDIO with clause 45 frame format. Register addresses need to be in their combined format. Registers 0x2 and 0x3 are appended their correct MMD address to add support for existing PHY HAL to retrieve the PHY ID. All other clause 22 registers return 0.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">uiPhy</td><td>Hardware address (MDIO address) of PHY </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">uiReg</td><td>Register address in combined format (e.g. 0x1E0020)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Data read from PHY in given register </dd></dl>
<dl class="section see"><dt>See also</dt><dd><code><a class="el" href="hal__adinphy_8h.html#a9df2ebc33752b18dfe9d6f9fdb53fdc3" title="Read from a register of the external PHY using MDIO clause 45.">adinphy_read_reg()</a></code> for description of combined addresses </dd></dl>

</div>
</div>
<a id="a9df2ebc33752b18dfe9d6f9fdb53fdc3" name="a9df2ebc33752b18dfe9d6f9fdb53fdc3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9df2ebc33752b18dfe9d6f9fdb53fdc3">&#9670;&nbsp;</a></span>adinphy_read_reg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int adinphy_read_reg </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>phy_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>reg_addr_combined</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read from a register of the external PHY using MDIO clause 45. </p>
<p >Sends both the address frame as well as the read frame to the MDIO bus to read from a specific register of the external PHY with given hardware address. During MDIO access, the HIF_PIO interrupts are disabled but all other interrupts are still active.</p>
<p >reg_addr_combined expects a combined hexadecimal address of both the targeted register as well as MMD. For example, register 0x0201 of MMD 0x1E has to be concatenated to 0x1E0201. Format:</p><ul>
<li><code>reg_addr_combined = 0x (MMD) (REGAD)</code></li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">phy_addr</td><td>Hardware address of the targeted PHY </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">reg_addr_combined</td><td>Combined register address </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">data</td><td>Data read from PHY</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><b>RC_OKAY</b> : Register was read</li>
<li><b>RC_INVALID_PARAMETER</b> : Wrong parameter submitted </li>
</ul>
</dd></dl>

</div>
</div>
<a id="a619e879eb2be1b3060da8d04a9eac675" name="a619e879eb2be1b3060da8d04a9eac675"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a619e879eb2be1b3060da8d04a9eac675">&#9670;&nbsp;</a></span>adinphy_register_link_state_callback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void adinphy_register_link_state_callback </td>
          <td>(</td>
          <td class="paramtype">void(*)(void *pvCtx)&#160;</td>
          <td class="paramname"><em>link_state_callback</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reference a callback for link state changes. </p>
<p >The callback will be called upon a link state change of any SPE PHY with a pointer to the PHY's data structure of type SPE_PHY_T as first parameter. To pass additional parameters to the callback function, use the pt_instance pointer that is available in this data structure. This pointer can be assigned after initialization with <a class="el" href="hal__adinphy_8h.html#afef578c323e82008b5bc0a8596ba669c" title="Initialize the external PHY on given xC port.">adinphy_initialize()</a>. The callback shall have the following definition:</p><ul>
<li><code>void my_callback(void* ptContext) { }</code></li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">link_state_callback</td><td>Pointer to a callback function </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4b7b549df9ac48f348da0e83b5ad2da1" name="a4b7b549df9ac48f348da0e83b5ad2da1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b7b549df9ac48f348da0e83b5ad2da1">&#9670;&nbsp;</a></span>adinphy_release()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int adinphy_release </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>xc_port</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Release external PHY from software power-down. </p>
<p >The PHY will be released from its software power-down state and auto-negotiation will be restarted.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">xc_port</td><td>xC channel on which the external PHY is connected to</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>RC_OKAY : Initialization successful</li>
<li>RC_INVALID_PARAMETER : Wrong parameter submitted </li>
</ul>
</dd></dl>

</div>
</div>
<a id="ac92ea26fa81003b916b2117b50701ff5" name="ac92ea26fa81003b916b2117b50701ff5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac92ea26fa81003b916b2117b50701ff5">&#9670;&nbsp;</a></span>adinphy_setup_irq()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void adinphy_setup_irq </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Setup interrupts for HIF_DIRQ (MMIO17) </p>
<p >Used to capture INT_N generated by the external PHYs. This function will not register an interrupt handler on the ARM, it only sets the respective registers to use HIF_DIRQ and capture an interrupt on low signal level at this pin. </p>

</div>
</div>
<a id="a0438512e3102a76d9eaba265d4a1a3fe" name="a0438512e3102a76d9eaba265d4a1a3fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0438512e3102a76d9eaba265d4a1a3fe">&#9670;&nbsp;</a></span>adinphy_write_cl45()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void adinphy_write_cl45 </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>uiPhy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>uiReg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>uiValue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Helper function to write to external PHY with MDIO clause 45. </p>
<p >Write to MDIO with clause 45 frame format. Register addresses need to be in their combined format. All clause 22 addresses are ignored.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">uiPhy</td><td>Hardware address (MDIO address) of PHY </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">uiReg</td><td>Register address in combined format (e.g. 0x1E0020) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">uiValue</td><td>Value to write to the given register</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><code><a class="el" href="hal__adinphy_8h.html#a008f63e30e9cd594f6cc0d788075fa01" title="Write to a register of the external PHY via MDIO clause 45.">adinphy_write_reg()</a></code> for description of combined addresses </dd></dl>

</div>
</div>
<a id="a008f63e30e9cd594f6cc0d788075fa01" name="a008f63e30e9cd594f6cc0d788075fa01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a008f63e30e9cd594f6cc0d788075fa01">&#9670;&nbsp;</a></span>adinphy_write_reg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int adinphy_write_reg </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>phy_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>reg_addr_combined</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write to a register of the external PHY via MDIO clause 45. </p>
<p >Sends both the address frame as well as the write frame to the MDIO bus to write data to a specific register of the external PHY with given hardware address. During MDIO access, the HIF_PIO interrupts are disabled but all other interrupts are still active.</p>
<p >reg_addr_combined expects a combined hexadecimal address of both the targeted register as well as MMD. For example, register 0x0201 of MMD 0x1E has to be concatenated to 0x1E0201. Format:</p><ul>
<li><code>reg_addr_combined = 0x (MMD) (REGAD)</code></li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">phy_addr</td><td>Hardware address of the targeted PHY </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">reg_addr_combined</td><td>Combined register address </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">data</td><td>Data to write to the PHY</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><b>RC_OKAY</b> : Register was written</li>
<li><b>RC_INVALID_PARAMETER</b> : Wrong parameter submitted </li>
</ul>
</dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_983f03418386a76a32a9f4a7fdd2c4bd.html">Includes</a></li><li class="navelem"><a class="el" href="hal__adinphy_8h.html">hal_adinphy.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
