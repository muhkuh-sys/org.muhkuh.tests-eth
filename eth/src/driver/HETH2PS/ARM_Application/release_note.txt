Ethernet 2-Port Switch HAL

Version  Name  Date       Revision History
6.3.0.0  MMA   08.09.2021 Added: Parameter ETH2PS_PARAM_LINK_INPUT_ENABLE (only for netX4000/90)
         BIL   11.03.2019 Fixed: MII timings on port 2/3 are set to extenal MII by default (netX4000)
         BIL   10.04.2019 Fixed: Time stamp errors of up to 10 ns on netX4000 ports 2/3

6.2.0.1  BIL   19.11.2018 Replaced: netX90MPW with netX90 targets

6.2.0.0  BIL   12.06.2018 Removed: Function Eth2PS_GetConnectionState()
                          Added: Function Eth2PS_SetLinkMode()
                          Added: Function Eth2PS_CfgMii()
                          Added: support for XC1 on netX4000
                          Added: support for NXHX4100_JTAG Revision 1
                          Fixed: netX90/4000: SystimeBorder initialisation invalid

6.1.0.0  AOC   10.01.2017 Added: support for netX4000 and netX90MPW
                          Fixed: Rare cases of frame buffer usage conflicts caused by premature cleanup/release of buffer
                                 Note: May theoretically happen in case of unicast mismatch cut-through forwarded to disabled/link_down transmit port
                                       This leads to frame buffer released to cleanup process before reception finished. 
                          Change: SFD detection based on "0x5d" instead on "0xd" only (not for netX50/100/500)
                          Change: no differentiation between untagged and VLAN-tagged frames, frame length incl. FCS always checked for =< 1522 bytes
                          Added: since netX51/52/4000/...: high-precise timestamping in ingress and egress
                          Change: since netX51/52/4000/...: SYSTIME resolution (systime_clock_count_value) should be 1 ns because high-precise timestamping requires 1 ns resolution
                                                            else receive timestamp errors of up to 250 ns may occur
                          Added: Parameters ETH2PS_PARAM_BPDU_ONLY and ETH2PS_PARAM_DISABLE_LEARNING to support (R)STP port states
                          Added: Parameters ETH2PS_PARAM_INGRESS_LATENCY and ETH2PS_PARAM_EGRESS_LATENCY to support timestamp correction
                          Added: Functions Eth2PS_InitFrameHandleFromFifoEntry() and Eth2PS_SetFrameLengthFromFifoEntry()
                                 these functions are only for special Hilscher use cases, don't use it for normal operation
                          Fixed: Multicast filter not cleared correctly when hash value of 2 multicasts differs only in hash[11:10]

6.0.0.0  AOC   08.03.2016 Merging all netX derivates to netX Studio project (Hitex Hitop IDE support dropped)






### Older release notes ###

Hardware platform:
NXHX500-RE (Ethernet Switch on XC channel 0/1)

Version  Name  Date       Revision History
0.900    HPF   05.02.2007 - initial release

0.901    HPF   16.02.2007 - updated XC microcode to 1.008

1.000    HPF   24.10.2007 - updated XC microcode to 1.010
                          - added configurable PHY LEDs
                          - extraced MMU/OS dependent defines to separate header file

3.0.0.0  AOC   05.06.2008 - Initial release for SubVersion
                          - Blink frequency is adjustable
                          - Confirmation suppression included
                          - HiTOP project for NXHX500-RE
                          - Bugfix: there must be at least 3 elements in empty fifo to get an empty pointer

3.1.0.0  AOC   05.11.2009 added user specific parameter for Init() and Start()
                          Bugfix: tx time stamp not transferred per DMA into frame buffer
                          Updated simpleloader.c for netx50 support and netx100 bugfix
3.2.0.0  AOC   22.02.2010 Bugfix: XC loader
                          some changes in project structure
3.3.0.0  IOS   28.06.2010 Changed: "hal_resource_defines.h" modified to avoid warnings during compilation
         AOC   09.08.2010 Deleted: disabling of fiber-optic mode during initializing
         AOC   19.08.2010 Bugfix: Request length in Confirmation changed
3.4.0.0  AOC   15.09.2011 Added: support for 2nd local MAC address per switch port
                          Bugfix: Reception of own transmitted frames in 10MBit HalfDuplex Mode deactivated
3.4.1.0  AOC   15.02.2012 Workaround: AutoMDIX function in 100 MBit forced mode
3.4.2.0  AOC   29.02.2012 Added: counters for SNMP InOctets, OutOctets
5.0.0.0  BIL   06.11.2013 New XC code with cut-through switching, DLR support
                          New HAL API
5.0.1.0  BIL   13.12.2013 Bugfix: Eth2PS_Initialize() does not pass user parameter into XC reset function
5.1.0.0  BIL   14.02.2014 API: New user parameter pvUser in function Eth2PS_GetPhyPhaseOffset(), needed for MIIMU_Read()
                          Bugfix: Eth2PS_CyclicInitialize() does not pass user parameter into XC reset function
5.2.0.0  BIL   20.02.2015 API: New user parameter pvUser in function Eth2PS_GetConnectionState()
                          Change: Transmission requests during link down are now discarded (ETH2PS_COUNTERS_T.ulTxDiscarded incements)
5.2.0.1  IOS   09.04.2015 Generating HiTop project

Hardware platform:
NXHX50-RE (Ethernet Switch on XC channel 0/1)

Version  Name  Date       Revision History
3.0.0.0  AOC   05.06.2008 - Initial release for SubVersion
                          - Blink frequency is adjustable
                          - Confirmation suppression included
                          - HiTOP project for NXHX50-RE
                          - Bugfix: there must be at least 3 elements in empty fifo to get an empty pointer
3.1.0.0  AOC   05.11.2009 added user specific parameter for Init() and Start()
                          Bugfix: tx timestamp not transferred per DMA into frame buffer
                          Updated simpleloader.c for netx50 support and netx100 bugfix
3.2.0.0  AOC   22.02.2010 Bugfix: XC loader
                          some changes in project structure
3.3.0.0  IOS   28.06.2010 Changed: "hal_resource_defines.h" modified to avoid warnings during compilation
         AOC   09.08.2010 Deleted: disabling of fiber-optic mode during initializing
         AOC   19.08.2010 Bugfix: Request length in Confirmation changed
3.4.0.0  AOC   15.09.2011 Added: support for 2nd local MAC address per switch port
                          Bugfix: Reception of own transmitted frames in 10MBit HalfDuplex Mode deactivated
3.4.1.0  AOC   15.02.2012 Workaround: AutoMDIX function in 100 MBit forced mode
3.4.2.0  AOC   29.02.2012 Added: counters for SNMP InOctets, OutOctets
5.0.0.0  BIL   06.11.2013 New XC code with cut-through switching, DLR support
                          New HAL API
5.0.1.0  BIL   13.12.2013 Bugfix: Eth2PS_Initialize() does not pass user parameter into XC reset function
5.1.0.0  BIL   14.02.2014 API: New user parameter pvUser in function Eth2PS_GetPhyPhaseOffset(), needed for MIIMU_Read()
                          Bugfix: Eth2PS_CyclicInitialize() does not pass user parameter into XC reset function
5.2.0.0  BIL   20.02.2015 API: New user parameter pvUser in function Eth2PS_GetConnectionState()
                          Change: Transmission requests during link down are now discarded (ETH2PS_COUNTERS_T.ulTxDiscarded incements)
5.2.0.1  IOS   09.04.2015 Generating HiTop project

Hardware platform:
NXHX50-RE as Host
NXHX-NX5EXT (Ethernet MAC on XC channel 0/1)
Note: switch between parallel and serial DPM via HITOP preprocessor definitions NX5_PARALLEL_DPM/NX5_SERIAL_DPM: ->Project->Settings->hal_eth_2port_switch->Tool Settings->Compiler

Version  Name  Date       Revision History
0.9.0.0  HPF   26.01.2009 Initial beta
1.0.0.0  AOC   09.03.2009 Initial release
3.2.0.0  AOC   22.02.2010 Added: support for serial and parallel Host interface
                          Bugfix: XC loader
                          some changes in project structure
3.2.1.0  HPF   06.04.2010 Added support for parallel DPM without ready signal
3.2.2.0  AOC   30.04.2010 Bugfix: splitted nonXpec and xPEC accesses in different functions
3.3.0.0  IOS   24.06.2010 Changed: "hal_resource_defines.h" modified to avoid warnings during compilation
3.3.1.0  AOC   09.08.2010 Changed: application demo for parallel DPM changed to zero-copy concept
         AOC   19.08.2010 Bugfix: Request length in Confirmation changed
3.3.2.0  AOC   29.02.2012 Added: counters for SNMP InOctets, OutOctets
3.3.3.0  AOC   06.03.2012 Added in function "NX5_DPM_WaitUnlocked": stop all netX5 internal AHB masters as soon as DPM access is possible
5.2.0.0  BIL   20.02.2015 New XC code with cut-through switching, DLR support
                          New HAL API
                          New example application
5.2.0.1  IOS   09.04.2015 Generating HiTop project

Hardware platform:
NXHX51-ETM (Ethernet Switch on XC channel 0/1)

Version  Name  Date       Revision History
3.4.0.0  AOC   08.02.2012 Initial release
3.4.1.0  AOC   14.02.2012 Correct MMIO configuration to support Link/Activity LEDs
3.4.2.0  AOC   29.02.2012 Added: counters for SNMP InOctets, OutOctets
4.0.0.0  AOC   15.06.2012 Added netX6 support
4.0.1.0  IOS   21.06.2012 Bugfix: unsigned long changed to uint32_t into irq_handler ..
4.0.2.0  IOS   30.08.2012 Bugfix: lost interrupts when using serial DPM
                          Bugfix: Wrong type of frame size in function send_frame() in application_demo.c
4.0.3.0  IOS   26.11.2012 Bugfix: NX_READ32/NX_WRITE32 into Eth2PortSwitch_SendAutoWithoutCnf()/Eth2PortSwitch_SendAuto() for using serial DPM
5.0.0.0  BIL   06.11.2013 New XC code with cut-through switching, DLR support
                          New HAL API
5.0.1.0  BIL   13.12.2013 Bugfix: Eth2PS_Initialize() does not pass user parameter into XC reset function
5.1.0.0  BIL   14.02.2014 API: New user parameter pvUser in function Eth2PS_GetPhyPhaseOffset(), needed for MIIMU_Read()
                          Bugfix: Eth2PS_CyclicInitialize() does not pass user parameter into XC reset function
5.2.0.0  BIL   20.02.2015 API: New user parameter pvUser in function Eth2PS_GetConnectionState()
                          Change: Transmission requests during link down are now discarded (ETH2PS_COUNTERS_T.ulTxDiscarded incements)
5.2.0.1  IOS   09.04.2015 Generating HiTop project
